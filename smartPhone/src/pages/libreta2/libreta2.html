<ion-header>
  <ion-navbar color="navbar">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>
      {{libretaTemporal.fechaLibreta}}
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
	<!--
    <ion-item class="itemPequenio" color="menuItemSelected" text-center>
      <ion-icon name="time"></ion-icon>
      @ionicframework
    </ion-item>
	-->

    <div *ngIf="libretaTemporal.data[indexHorario].tipo=='horario'" style="text-align: center; background: rgb(29, 229, 33)" class="row">
      <div class="col">
      <span><i class="far fa-clock"></i></span>
      <span> {{libretaTemporal.data[indexHorario].label}} </span> 
      </div>
    </div>

    <div *ngIf="libretaTemporal.data[indexHorario].tipo=='diario'" style="text-align: center; background: #1d92f2" class="row">
      <div class="col">
      <span> {{libretaTemporal.data[indexHorario].label}} </span> 
      </div>
    </div>


    <div *ngFor="let item of data.children;let i = index">
        <div *ngIf="item.type=='collapseList'">
              <button text-wrap ion-item color="secondary" data-toggle="collapse" [attr.href]="'#collapse'+i"  aria-expanded="false" (click)="clickCollapseButton(i,'collapse'+i,$event)">
                <ion-label>{{data.label}} - {{item.label}}</ion-label>
                <ion-icon *ngIf="item.initialShow" item-end name="arrow-dropdown" ></ion-icon>
                <ion-icon *ngIf="!item.initialShow" item-end name="arrow-dropright" ></ion-icon>
              </button>
              <div *ngIf="item.initialShow" class="collapse show" id="collapse{{i}}" >
              
                  <div *ngFor="let item2 of item.children">
                    <div *ngIf="item2.type=='input_number'" padding>
                    <!--<br>-->
                    <div class="row">
                      <div class="col-6 offset-1">
                        <span>{{item2.label}}</span>
                      </div>
                      <div class="col-4">
                        <!--<ion-spinner item-start name="dots" *ngIf="pruebaActivo"></ion-spinner>-->
                        <input *ngIf="!item2.error" text-center class="form-control" type="number" name="prueba" [(ngModel)]="item2.value" (blur)="blur(i,item2)">
                        <input *ngIf="item2.error" text-center class="form-control is-invalid" type="number" name="prueba" [(ngModel)]="item2.value" (blur)="blur(i,item2)">
                        <div class="invalid-feedback">
                          {{item2.error}}
                        </div>
                      </div>
                      
                    </div>
                    <!--<br>-->
                    </div>

                    <div *ngIf="item2.type=='input_calculo'" padding>
                        <!--<br>-->
                        <div class="row">
                          <div class="col-6 offset-1">
                            <span>{{item2.label}}</span>
                          </div>
                          <div class="col-4">
                            <!--<ion-spinner item-start name="dots" *ngIf="pruebaActivo"></ion-spinner>-->
                            <input *ngIf="!item2.error" text-center class="form-control" type="text" name="prueba" [(ngModel)]="item2.value" (blur)="blur(i,item2)"  disabled>
                            <input *ngIf="item2.error" text-center class="form-control is-invalid" type="text" name="prueba" [(ngModel)]="item2.value" (blur)="blur(i,item2)"  disabled>
                            <div class="invalid-feedback">
                              {{item2.error}}
                            </div>


                          </div>
                          
                        </div>
                        <!--<br>-->
                    </div>

                    <div *ngIf="item2.type=='button'" padding>
                      
                      <button *ngIf="item2.function && item2.function!=null"  ion-item color="navbar" text-center (click)="calcular(item2.function)">
                        <ion-label>{{item2.label}}</ion-label>
                      </button>
                      <button *ngIf="!item2.function || item2.function==null"  ion-item color="navbar" text-center>
                        <ion-label>{{item2.label}}</ion-label>
                      </button>
                    
                    </div>
                    
                  </div>

              </div>
              <div *ngIf="!item.initialShow" class="collapse" id="collapse{{i}}">


                    <div *ngFor="let item2 of item.children">
                    <div *ngIf="item2.type=='input_number'" padding>
                    <!--<br>-->
                    <div class="row">
                      <div class="col-6 offset-1">
                        <span>{{item2.label}}</span>
                      </div>
                      <div class="col-4">
                        <!--<ion-spinner item-start name="dots" *ngIf="pruebaActivo"></ion-spinner>-->
                        <input *ngIf="!item2.error" text-center class="form-control" type="number" name="prueba" [(ngModel)]="item2.value" (blur)="blur(i,item2)">
                        <input *ngIf="item2.error" text-center class="form-control is-invalid" type="number" name="prueba" [(ngModel)]="item2.value" (blur)="blur(i,item2)">
                        <div class="invalid-feedback">
                          {{item2.error}}
                        </div>
                      </div>
                      
                    </div>
                    <!--<br>-->
                    </div>

                    <div *ngIf="item2.type=='input_calculo'" padding>
                        <!--<br>-->
                        <div class="row">
                          <div class="col-6 offset-1">
                            <span>{{item2.label}}</span>
                          </div>
                          <div class="col-4">
                            <!--<ion-spinner item-start name="dots" *ngIf="pruebaActivo"></ion-spinner>-->
                            <input *ngIf="!item2.error" text-center class="form-control" type="text" name="prueba" [(ngModel)]="item2.value" (blur)="blur(i,item2)"  disabled>
                            <input *ngIf="item2.error" text-center class="form-control is-invalid" type="text" name="prueba" [(ngModel)]="item2.value" (blur)="blur(i,item2)"  disabled>
                            <div class="invalid-feedback">
                              {{item2.error}}
                            </div>


                          </div>
                          
                        </div>
                        <!--<br>-->
                    </div>

                    <div *ngIf="item2.type=='button'" padding>
                      
                      <button *ngIf="item2.function!=null"  ion-item color="navbar" text-center (click)="calcular(item2.function)">
                        <ion-label>{{item2.label}}</ion-label>
                      </button>
                      <button *ngIf="item2.function==null"  ion-item color="navbar" text-center>
                        <ion-label>{{item2.label}}</ion-label>
                      </button>
                    </div>
                    
                  </div>
              
              </div>
          
        </div>
        
        

    </div>

</ion-content>
